!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return t[i].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="/",e(0)}([function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=!1,i=!1,a=!1,r=!1,o=!1,u={},s=function(t){if(this.canvas=document.querySelector(t),!this.canvas)throw new Error("no canvas element on the selector");this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height,this.canvas.getContext&&(this.ctx=this.canvas.getContext("2d")),n=!0};s.prototype.clearCtx=function(t){if(!n)throw new Error("please initialize before configuration");t||(t={});var e=t.x||0,i=t.y||0,a=t.width||this.canvasWidth,r=t.height||this.canvasHeight;this.ctx.clearRect(e,i,a,r)},s.prototype.textConfig=function(t){if(!n)throw new Error("please initialize before configuration");if(t||(t={}),!t.text)throw new Error("text can not be empty");var e={text:t.text,font:t.font||"50px sans-serif",fontColor:t.fontColor||"#000",textX:t.textX||20,textY:t.textY||100},a=this.ctx.measureText(e.text).width;"function"==typeof t.textX&&(e.textX=t.textX(a)),this.textOpt=e,i=!0},s.prototype.imageConfig=function(t){if(!n)throw new Error("please initialize before configuration");if(t||(t={}),!t.imgUrl)throw new Error("imgUrl can not be empty");var e=new Image,i=this;e.onload=function(){var n=void 0,a={image:e,sx:t.sx||0,sy:t.sy||0,sWidth:t.sWidth||e.width,sHeight:t.sHeight||e.height,dx:t.dx||(i.canvasWidth>e.width?i.canvasWidth/2-e.width/2:0),dy:t.dy||(i.canvasHeight>e.height?i.canvasHeight/2-e.height/2:0),dWidth:t.sWidth||e.width,dHeight:t.sHeight||e.height,contain:t.contain||!1,cover:t.cover||!1};a.contain&&(a.dWidth=i.canvasWidth,a.dHeight=i.canvasHeight),a.cover&&(e.width/e.height>i.canvasWidth/i.canvasHeight?(n=a.dWidth,a.dWidth=i.canvasWidth,a.dHeight=i.canvasWidth*a.dHeight/n):(n=a.dHeight,a.dHeight=i.canvasHeight,a.dWidth=i.canvasHeight*a.dWidth/n),a.dx=i.canvasWidth>a.dWidth?i.canvasWidth/2-a.dWidth/2:0,a.dy=i.canvasHeight>a.dHeight?i.canvasHeight/2-a.dHeight/2:0),i.imageOpt=a,r=!0},e.src=t.imgUrl,a=!0},s.prototype.animationConfig=function(t){if(!n)throw new Error("please initialize before configuration");t||(t={});var e={dataXOffset:t.dataXOffset||0,dataYOffset:t.dataYOffset||0,dataWidth:t.dataWidth||this.canvasWidth,dataHeight:t.dataHeight||this.canvasHeight,cols:t.cols||t.dataWidth||this.canvasWidth,rows:t.rows||t.dataHeight||this.canvasHeight,initialX:t.initialX||this.canvasWidth/2+Math.round(10*(Math.random()-.5)),initialY:t.initialY||Math.floor(this.canvasHeight/2)+Math.round(10*(Math.random()-.5)),totalFrame:t.totalFrame||500,blur:t.blur||0,animationType:t.animationType||"easeOutCirc",delay:t.delay||0,filter:function(){return!0}};("number"==typeof e.delay||"string"==typeof e.delay&&"number"==typeof Number(e.delay))&&!function(){var t=e.delay;e.delay=function(){return t}}(),("number"==typeof e.blur||"string"==typeof e.blur&&"number"==typeof Number(e.blur))&&!function(){var t=Number(e.blur);e.blur=function(){return t}}(),"function"==typeof t.filter&&(e.filter=t.filter),this.animationOpt=e,o=!0},s.prototype.draw=function(){if(!i&&!a)throw new Error("please config text or image before drawing");var t=this;return new Promise(function e(n,o){if(a){if(!r)return void setTimeout(function(){e(n,o)},100);var u=t.imageOpt;t.ctx.drawImage(u.image,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}i&&(t.ctx.font=t.textOpt.font,t.ctx.fillStyle=t.textOpt.fontColor,t.ctx.fillText(t.textOpt.text,t.textOpt.textX,t.textOpt.textY)),n()})},s.prototype.animate=function(){function t(){return i.draw().then(function(){var t=i.ctx.getImageData(a.dataXOffset,a.dataYOffset,a.dataWidth,a.dataHeight);i.clearCtx();for(var e,n,r,o,u=Math.round(a.dataWidth/a.cols),s=Math.round(a.dataHeight/a.rows),c=0,f=t.data,d=1;d<=a.rows;d++)for(var l=1;l<=a.cols;l++)if(c=4*((d*s-1)*a.dataWidth+(l*u-1)),e=f[c],n=f[c+1],r=f[c+2],o=f[c+3],a.filter(e,n,r,o)){var p={dx:a.dataXOffset+l*u+Math.round((Math.random()-.5)*a.blur(e,n,r,o)),dy:a.dataYOffset+d*s+Math.round((Math.random()-.5)*a.blur(e,n,r,o)),ix:a.initialX,iy:a.initialY,cx:a.initialX,cy:a.initialY,finish:!1,delay:a.delay(h.length),fillStyle:"rgba("+e+","+n+","+r+","+o+")"};h.push(p)}})}function e(){return new Promise(function(t,e){function o(){i.clearCtx();for(var e=h.length,c=null,f=0;f<e;f++)if(c=h[f],c.finish?(c.cx=c.cx,c.cy=c.cy):(c.cx=u[a.animationType](r-c.delay<=0?0:r-c.delay,c.ix,c.dx-c.ix,a.totalFrame),c.cy=u[a.animationType](r-c.delay<=0?0:r-c.delay,c.iy,c.dy-c.iy,a.totalFrame),c.dx===c.cx&&c.dy===c.cy&&(c.finish=!0,s++)),i.ctx.fillStyle=c.fillStyle,i.ctx.fillRect(c.cx,c.cy,1,1),s===e&&f===e-1)return cancelAnimationFrame(n),t();r++,n=requestAnimationFrame(o)}o()})}if(!o)throw new Error("please config animation using animationConfig() before invoking animate()");var n,i=this,a=i.animationOpt,r=0,s=0,h=[];return new Promise(function(n,i){t().then(function(){return e()}).then(function(){n()})})},s.prototype.clearText=function(){i=!1},s.prototype.clearImage=function(){a=!1,r=!1},u={easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){return n*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,n,i){return 0==t?e:n*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,n,i){return t==i?e+n:n*(-Math.pow(2,-10*t/i)+1)+e},easeInOutExpo:function(t,e,n,i){return 0==t?e:t==i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,i){var a=1.70158,r=0,o=n;if(0==t)return e;if(1==(t/=i))return e+n;if(r||(r=.3*i),o<Math.abs(n)){o=n;var a=r/4}else var a=r/(2*Math.PI)*Math.asin(n/o);return-(o*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/r))+e},easeOutElastic:function(t,e,n,i){var a=1.70158,r=0,o=n;if(0==t)return e;if(1==(t/=i))return e+n;if(r||(r=.3*i),o<Math.abs(n)){o=n;var a=r/4}else var a=r/(2*Math.PI)*Math.asin(n/o);return o*Math.pow(2,-10*t)*Math.sin((t*i-a)*(2*Math.PI)/r)+n+e},easeInOutElastic:function(t,e,n,i){var a=1.70158,r=0,o=n;if(0==t)return e;if(2==(t/=i/2))return e+n;if(r||(r=i*(.3*1.5)),o<Math.abs(n)){o=n;var a=r/4}else var a=r/(2*Math.PI)*Math.asin(n/o);return t<1?-.5*(o*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/r))+e:o*Math.pow(2,-10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/r)*.5+n+e},easeInBack:function(t,e,n,i,a){return void 0==a&&(a=1.70158),n*(t/=i)*t*((a+1)*t-a)+e},easeOutBack:function(t,e,n,i,a){return void 0==a&&(a=1.70158),n*((t=t/i-1)*t*((a+1)*t+a)+1)+e},easeInOutBack:function(t,e,n,i,a){return void 0==a&&(a=1.70158),(t/=i/2)<1?n/2*(t*t*(((a*=1.525)+1)*t-a))+e:n/2*((t-=2)*t*(((a*=1.525)+1)*t+a)+2)+e},easeInBounce:function(t,e,n,i){return n-jQuery.easing.easeOutBounce(i-t,0,n,i)+e},easeOutBounce:function(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e}},e.Partimate=s,e["default"]=s}])});